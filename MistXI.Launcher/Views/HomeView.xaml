<UserControl x:Class="MistXI.Launcher.Views.HomeView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="Transparent">

  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="2.2*"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <!-- Hero / Branding -->
    <Border Grid.Column="0" Margin="0,0,16,0" CornerRadius="20" BorderBrush="{StaticResource Mist.Border}" BorderThickness="1" ClipToBounds="True">
      <Grid>
        <Grid.Background>
          <ImageBrush ImageSource="pack://application:,,,/Assets/Header.png" Stretch="UniformToFill"/>
        </Grid.Background>

        <!-- Soft overlay for readability -->
        <Border>
          <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
              <GradientStop Color="#D0000000" Offset="0.0"/>
              <GradientStop Color="#90000000" Offset="0.55"/>
              <GradientStop Color="#50000000" Offset="1.0"/>
            </LinearGradientBrush>
          </Border.Background>
        </Border>

        <Grid Margin="26">
          <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <StackPanel VerticalAlignment="Center" MaxWidth="520">
            <Image Source="pack://application:,,,/Assets/Vertical Logo.png"
                   Height="220" Stretch="Uniform" SnapsToDevicePixels="True"/>

            <TextBlock Style="{StaticResource Mist.Caption}" 
                       Margin="0,14,0,0" 
                       TextWrapping="Wrap"
                       TextAlignment="Center"
                       HorizontalAlignment="Center"
                       Text="A classic-era FFXI private server with thoughtful quality-of-life improvements"/>
          </StackPanel>

          <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Bottom" Opacity="0.85">
            <TextBlock Style="{StaticResource Mist.Caption}">
              <Hyperlink NavigateUri="https://mistxi.com" RequestNavigate="Hyperlink_RequestNavigate" Foreground="{StaticResource Mist.Teal}">
                <Run Text="Visit mistxi.com"/>
              </Hyperlink>
            </TextBlock>
            <TextBlock Style="{StaticResource Mist.Caption}" Margin="10,0,10,0" Text="•"/>
            <TextBlock Style="{StaticResource Mist.Caption}">
              <Hyperlink NavigateUri="https://discord.gg/kQp9Vetk3d" RequestNavigate="Hyperlink_RequestNavigate" Foreground="{StaticResource Mist.Teal}">
                <Run Text="Join Discord"/>
              </Hyperlink>
            </TextBlock>
          </StackPanel>
        </Grid>
      </Grid>
    </Border>

    <!-- Right Column -->
    <StackPanel Grid.Column="1">

      <!-- Profile -->
      <Border Style="{StaticResource Mist.Card}" Margin="0,0,0,16">
        <StackPanel>
          <TextBlock Style="{StaticResource Mist.H2}" Text="Game Profile" Foreground="{StaticResource Mist.Accent}"/>
          <ComboBox Style="{StaticResource Mist.ComboBox}" x:Name="ProfileCombo" Margin="0,10,0,0" Height="34" SelectionChanged="ProfileCombo_SelectionChanged">
            <ComboBoxItem IsSelected="True">Default</ComboBoxItem>
          </ComboBox>
          <TextBlock x:Name="ProfileSummary" Style="{StaticResource Mist.Caption}" Margin="0,8,0,0" Text="Default profile"/>
        </StackPanel>
      </Border>

      <!-- Launch -->
      <Border Style="{StaticResource Mist.Card}" Margin="0,0,0,16">
        <StackPanel>
          <TextBlock Style="{StaticResource Mist.H2}" Text="Launch" Foreground="{StaticResource Mist.Accent}"/>

          <TextBlock Style="{StaticResource Mist.Caption}" Margin="0,8,0,0" TextWrapping="Wrap"
                     Text="Optional: enter login info for auto-login. If left blank, you can log in at the title screen."/>

          <Grid Margin="0,12,0,0">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="0,0,8,0">
              <TextBlock Margin="0,0,0,4" Text="Username"/>
              <TextBox x:Name="UserBox" Style="{StaticResource Mist.TextBox}"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="8,0,0,0">
              <TextBlock Margin="0,0,0,4" Text="Password"/>
              <PasswordBox x:Name="PassBox" Style="{StaticResource Mist.PasswordBox}"/>
            </StackPanel>
          </Grid>

          <CheckBox x:Name="SaveCredsCheck" Margin="0,10,0,0" Content="Save login on this PC (encrypted)"/>
          <Button x:Name="ForgetCredsBtn" Style="{StaticResource Mist.SecondaryButton}" Margin="0,8,0,0" Click="ForgetCreds_Click">Forget Saved Login</Button>

          <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
            <Button x:Name="StartBtn" Style="{StaticResource Mist.PrimaryButton}" Click="Start_Click" Padding="24,12">START GAME</Button>
            <Button x:Name="CancelBtn" 
                    Style="{StaticResource Mist.SecondaryButton}" 
                    Click="Cancel_Click"
                    Visibility="Collapsed"
                    Margin="12,0,0,0"
                    Padding="20,12">Cancel</Button>
          </StackPanel>
          
          <ProgressBar x:Name="ProgressBar" 
                       Height="8" 
                       Margin="0,12,0,0"
                       Background="{StaticResource Mist.Panel2}"
                       Foreground="{StaticResource Mist.Accent}"
                       BorderThickness="0"
                       Visibility="Collapsed"/>
          
          <TextBlock x:Name="StatusLine" Style="{StaticResource Mist.Caption}" Margin="0,12,0,0" Text="Status: Idle"/>
        </StackPanel>
      </Border>

      <!-- Announcement -->
      <Border Style="{StaticResource Mist.Card}">
        <StackPanel>
          <TextBlock Style="{StaticResource Mist.H2}" Text="Announcement" Foreground="{StaticResource Mist.Accent}"/>
          <Border Background="{StaticResource Mist.Panel2}" CornerRadius="16" Margin="0,12,0,0" Padding="14">
            <TextBlock x:Name="AnnouncementText" TextWrapping="Wrap" Text="Loading latest news…"/>
          </Border>
          <Button x:Name="ViewNewsButton" Margin="0,10,0,0" Style="{StaticResource Mist.NavButton}" HorizontalAlignment="Left" Click="ViewNews_Click">View All News</Button>
        </StackPanel>
      </Border>

    </StackPanel>
  </Grid>
</UserControl>
